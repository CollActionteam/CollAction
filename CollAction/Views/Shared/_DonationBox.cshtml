@using CollAction.Services.Donation
@using Microsoft.Extensions.Options
@inject IOptions<StripeJavascriptOptions> StripeOptions
@inject UserManager<ApplicationUser> userManager;
@using Microsoft.AspNetCore.Http.Features

@{
    var consentFeature = Context.Features.Get<ITrackingConsentFeature>();
    var canTrack = consentFeature.CanTrack;
}

@if (canTrack)
{
    var user = await userManager.GetUserAsync(User); 
    <div id="donation-mission" class="row">
        <div class="col-xs-12 col-md-offset-1 col-md-6">
            <h3>Our mission</h3>
            <h1>We help people <b>solve collective action problems</b> through crowacting.</h1>
        </div>
    </div>
    <div id="donation" class="row">
        <div class="col-xs-12 col-md-offset-1 col-md-5">
            <div id="donation-box" data-stripe-public-key="@StripeOptions.Value.StripePublicKey" data-user-name="@(user == null ? null : $"{user.FirstName} {user.LastName}")" data-user-email="@user?.Email"></div>
        </div>
        <div class="col-xs-12 col-md-offset 6 col-md-5">
            <div id="donation-faq">
                <h1>Frequently Asked Questions</h1>
                <div id="faq-why-donate"></div>
                <div id="faq-donation-goes-to"></div>
                <div id="faq-collaction-started"></div>
            </div>
        </div>
    </div>
}