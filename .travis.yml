language: minimal
sudo: required

services:
- docker

script:
- dotnet test CollAction.Tests
- docker build . -f CollAction/Dockerfile -t collaction:latest
after_success:
- pip install --user awscli # install current version of aws cli w/o sudo
- export PATH=$PATH:$HOME/.local/bin # put aws in the path
- chmod +x scripts/docker-push.sh
- scripts/docker-push.sh
# - scripts/deploy.sh auto-deployment disabled; use the test-select tool instead

env:
  global:
  - DISABLE_NPM_BUILD=1
  - secure: GTLIxr2KVmI4L5TPwbK2YumLyy65ZbXRVwM3BhIX82h+wMB+/jXbN7aWqTPQPhB1D75QJ2PQOP/HDhpMN7CN/9ntOyvF9pZKA/pFj/ZXGuJZcQdax5UU7BHn6CBZ9C2MhSTu4EJBRLMLdC4H4MkRWAL9PinLj0aWgRIwjoNv+R2bmyZepKAEQ8vLH6qUE/fVc/eFtly0/NhlzGxW6KrGhZlRZd5dJLnZ9dXUnUbsTT7Or1Yd/DcJ5EORVFiQvesERO55gdx3WUMkNYpjKiGPlIhK0dRiBjqpZQmGh1SKn+vgDKapeV0Aq7hyiimK/MRzdurviSieqlaKk47F0A//4BpxgdU4XKZK4k092fIx04UCNC8FJAbFOy/3sqm21TH6vzh3k5WhyUHje+LWm1wITSjr/gJirirzQ2DHZaAykhiNoXDR/UyU8MIoM1MaGUi4kYmIFvyYzG+C98LpC6olYEgyPUt0a1nIov/isX2E9dmS1snrtrXiHe7T82ZbL5HBsbKN0IvubiARjzHL561ChCVDxTkR8PQtrO6hjXbvtegDRq5Qoxha5z7X3nr1kcTzOd2hVpTD4NAmM88KKv6XzCDlRptv9UOoy1l6nNFrw/xZDtWdDIN0Z+fJhoJVTcKI2k39DmkljTCIgqeNQfk/ZnwFQrC9aqutva6wVUmJwc0=
  - secure: eBWrtiCAFWJrHcz6i1YDZqWlOdhj8pEEKG51h/SEKAT0q08bRgBcePschpTfLiA+OnYcBeiZbbhjFB4EHMvNDEMk8YQA88An8MVoS7v8vU2p9yd8gCW7iTEVY++r5OOF9CXdBzwjxoTOyO4+WGIZA1u7oNeL0FingwR+KvZl8rGhVdrJUmtK88CEP2Y8abE6aYY9TZwBWP7Ej8hsE3Qa3J2f4h7N11oRZAuu/Kzh75raX2/wgxxQEcfqk1TcTM7y43rG2eikbBjwi+RvD0BPAmOTD0aAlwlFdkM3ZxJxgw+/JsdhAx0JOeblFminQfZT6Hiu7fVdolpywOJ4YVxvMYYi34cFTkVEdNV7ARImSWq6ylEL7TWbQkwz44VRYX6WO8vvMu6pzz6eAReKbWTdu/8vk4hWl5kJlfsV/QLDukABnBVgvFnFzfCfoNQ4rDN3uEdbJa2Rwg8uYZtMzgVyQ31Ai96ytw1DYavrlFfVtgr7yegMP6fdGEC4kCRT+JxP8lxaGNToowpsR47Cp08om9h70I4fFkuROhTxpAtJiW/4l9rdfZ+lahjLJeuCz8+JMYmbq6AX0DMTnCRQ98t8hYnLqPZoLqOzhs6lzkkpN63ad817M5AA5PfvVqmPeYytnzqGmjjNrC9tIkrfHwBuOyjdsoqZ9Yset4kKxyP4eVE=
  - secure: crHqR2L4jXJo2DjaJkZGVUORAwLDQre6Xme1BQmGJ8L7uP3+A/ooPsY9Y+uplLvP/vOGUgpJU9gyLiEre4Hex0M4Ir2D6Q57BLUGGtWIAWNQE674mZwuBN23S+Ph2DglAWsN1JzKcjO/v6hsQPIGsj0b/yY+cz4P3biDLw3oGD1F4mCQqe83wVitY5eK1+CvA1vAN0sEcSPoGTsRjx4UEIi6BwsDjyK2dJ68BY7J0mQJNDCrlFJoXo7EL37sHVqMzqqh/tftLZ9EessZnWR5yyty2OJdi6d1p3Q4ojfuEdKpmdRmucB0rWmQ4GMrKY4XYQ8KR6F81WD1TAU+WbCs75hV9whi7c//uLKhXanx8eADNSnkPfNLAvuPSwcTmfMkg0FUC9fn4/ip7jFlBTwUnFYnUIt6FC/NgsNWAKbWNE9aQSMysnpJ/63C1gMTT+D+06fo3AdTNghuVD0Me7AapL1qih5JOGvbYckrGib84ri04m8ImFxCtpXSX+GIz8N+OlvDrHj75FUtl3Sgk1uqLZnj0kcALYiECETNEAiKFbLd8O8a39T8pVFBP/kFNqmB6nbAB6nFJTVyRM0YrWilVhQruf94kvO4DLdEHsVp1CxGYrmC9EpqxLXWTBBaLXJfjSxABR0d6vnoFK2l3nPDV8+AJMh98ar1zrX6LQAuHNY=
  - secure: Qlpgu6nWW1eecUFD0GEUiIzJW+9fy/Cr8nDKYNWf2pFYyHEOysD2CJ3Re2ybqI06+YIIPkiK0EaIM3jEdZYZnAoYqaWiXIFtscbX6NhAB7u1RUF/SPbYpueOP6e/O2J/AP1Mt8iwy9A4QKmf6kRGLBIJ/Dg0/RI9twPpgegIqaWnHpaj3qZnhdZCYQNlTHQD6f3nuS/P5iVyl8RVKtD9oGIRr5qBneDyooxKH10Wl9615r/76V8H61on6y+MN6T07kXTLCd6B9yM8L/1ewekgVcKqiDQdCFPyne44uD7aNPxQNXwFAuu9a1bwF4DwbN/sTXIhpmvnFR2UsL51ShLaYOJjzQ9lU6RPWmZ3T+G5WxiM/L8zsDB66GcXe5093cotX/fwhHUupSPHBCT2oyn7LMhBxFLNc2vhxFoqf2xQh51xjF5EsHPu59RiZwko6YmnnmWAk1I7lA/LH6KUl8GeKVVZ0PtN+kwvqlrIjM6Ojye8ruFujrEDllV268mx0Ac1WXhlMrjaHm2C74/aypetD5ik5CRtw0bkreAGWiZuwab6hGcM/tQkDfkP9r/MMHtnAKvZnebiJXIexIkHwuigxaCw1FC81VrniLxIJEKSI3uKbs5nRrroqYTb0Z9cwkrk9heLWOMw3LXLLaSMD79lHfP0O5kqPETSebMopllZdQ=
  - secure: TEOh/B9CD3gj5sJuwZGu9jDuzVzgKO4aRgqF9vuqIoLjmCjRkrwDFi5ytDeCSWf2qyuAvQJwsNOxpEmGGXGeJxvinYBAreHrORnpyV7e3s2XsTLZddb8C44n1XD9Wmi2GN1QXOHooB8VZ7ZtBqfWUaFPyazujweMw3lHYyi4ezoZqmh3VuDu2jJQCYRA1GFB++n8incVxGIgo0yrhFTaghf6S9cQWAz4v47PGQIrHfdJBVYLvrV1X2KDKSvViBeYssrCTcWmUlCAX6gLXrZzFT+NT9nfJ/e3G/Darm/yKz6Tlj43T37iFqF+P/IxCsZKueaBHPWdB8THiE5MDrewL936md5AndP5lpiYB+G+ypRG+Hlk5BWtOFUhLz3aoRrGcyAbnlfIAj7ri2P3ogZm88axEIwqcOmUdJfjysuawNSZbBUlucyMIId1bzzURoOwMwIgB70goA8PZdK0vFO+GEJdXiTRdgQ3cqRHxTHj3Uiw3jLnVoURscFd4eLCQRfhrT5SOSLZkxzsqhuSmszHo0x/bKxE3uOqIC0+/rZ6p1Tg/cAh7cYy+l8q1WFqXZpp7YCGcgTr8WFF2WMeHwovfZP4OTNywKPNUt5MxueeUHJnXVx97gCx4OnlSnQGzu0eGy1GXd3d1wiztyKlDCqSewDIlCXYiBfuMCZKx0Bd3xo=
  - secure: MSKbHK5v5WbXPmS1Jz0JSwsCco4aRJUDm7hvLqTXgKWfaKiKZlCcPG0keZRtdfoRFMt0Kkm6zka0182OgX5aZbaWO+kfl92G/AGIgBFzxCTWoLZ2qUiLYv65twvHNDmJXUgJru2P0PZLOuv/pFRcBW6P3YEQfrCWlilKj+L1HPD6jLFqTwhG/GA2mURW/I7mYVl12mFfTPw5SkHP9sPPXVbscune0XSzLOOUvfxrJmjgfuLnzig0+KrWkjgGsalBt4xpe1Y2JQKSzg0J0M+UnCh8Gtz3I9PEipntYh1w7oOOXroFUgI4eHeRGJ+DoTYFDJNugpTzsPsOBBO/+NgZlWTfHslPcN3pWcb4sGqV5fvTDUv1U8fusyaRVUxJw6YUHPvg7G/RjLsiLc5qXNAuyrlp+zT6Bqju8Ze/3ce+hYviL8xhsVlsfm136qhAYLkkxRFgmmMhX2C/UvmQWgKRplYazRpX/OcujiS+75U2LkPWzcKfiC54hIoum+C+xV/RIt2P1WdU/gxtsx9BSGpUlRQ1zIl/Rv0ruHvzS1HpBfBBK/9gL69vLHJcpr8uEmUt7yvRh/0fYaK1qanmtXxQ4DRlE1PXgXRK1a+XkuS0/Cxiuqp0URcETcFTYEtrIkEhYznCs1feNTDCyBTTg02jSgsbKe0PnixPsAlvcnntnLI=
  - secure: FRYz+0XPnZKvEmW6Tz6ih9yYre1Gub6cpsBVAj6HdrXxIJCm2jPqouF67lLE8qHMjoVweez9tyTCjZ4vmkc04j+965CsUUNPsSQVOmoNC5IJei21XhFWg41F4H0PArT+8t9pSazs4hppHyICqykdmJWOKNF3GwGgYrBmEV+REB9GO6cpU9UE/tTLYuTX3UHdtlD4xIrsyGNESh0KOwbqwr1TWJTyso7x25ub09B2DF3W/oGSnxz/FSfjI5340YYpIUsc2/xmA0JGOiYuavh51DBP+bW1B7F5Ql/9rwMNIv64rQLV9YrbL4yQ/hL272aKxVxfnr5pUPMpnJUVWEBBR3WBtjnzCTIQo65s6kQL8SyWinFBHixUAsseYNqebB8Q+EsUJD0vVZUfSoRrwThnVv6e/xmtW+wWh7HKj79vpdIDOpf+1UHgSoh3GIUksyq8U3/gS1Lzgg13qqIPIAiZKHmskmDQRseaxF+Ix+OehqQpGfRwFG5N7Y0snvk0jcP1IwxxFAFmzChYEZOyGiKi+3jT0n8WQp6vHXtQXgSsMCIuDAFbc6xOurta/8vxUgC6KkfgJ6ZAmq++xyn01j38cExqkjf03uBzqtrZ8bxp5IkqNiFhTuBqfXU9dN86bGFRC3aD2kGQKwhvRasz2wUllZziM+KmemZoOI7gDdgMzjc=
  - secure: pxNTJ5y4V5RKwIdRvlr/SzbqgNwQ4U2YLW6QvOsgwcyd2ZEJJ98ffRDHTbixHMIWteb6v8SIfjEJOMCHwvqzfyQF+QaZ0NDclSxn63SCj0srRyqRNy013WUEExxG91xSuokM4oneqta5xVGqGbNvcZjWFiVneE0HwidqRJumOWR9us+Ufd+/5K+CFVZNr2Wl5nkwawGKbzAgS3EcJ/DN1qMD1U/8Rz5OG74XxfMwHkqnR4A/+YSc6+5RoKe7d3vLhrJci5HKfIbMDjTO/gOFGSOs5S4NjRGI8XbgCoIa9Up4NMTRoqhRR4eGt5GFIhxEUTf03MKsUVK7PuhGmd0m/LTLAy3Q37kKDf7FhGvpCXrEkprOdOCM6LG6VglyVHzQYMbyYmkAaNiTobH6lezuzP46SP0UWl+sHvIKYZNNLWHXZlges4fmk8UQfQKaf6bVvEUmludIvIQ9JPwrOKRdPcdRMNq1Evk36XYGBN9IUCzf50kap5CmkSH6evXqdK5vSTaPqinYEZBkT1OnBIyvwrJsBfXAR0275CExWqOvQS0CxjB718G5za7rWfAfznf9cbYO7BVNQmukpiCYSsuFVejfisZsW+RVPXVA7F3JKJGCDe1ple/t00pQwfHG2+gnffI25MZUoj+s2YBFARH2fX/eMr8QXyXcVNGEIHBiP/E=
